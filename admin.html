<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel Otan Holding Managers Motivation Program</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="index.css">
    <link rel="icon" type="png" href="logo.png">

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
        import { getDatabase, ref, push, set, remove, update, onValue } from from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
          
          const firebaseConfig = {
            apiKey: "AIzaSyDCHaYqsaMX2TqmIRXZeZ6RChPut1fhGT8",
            authDomain: "adwadaw-36ee0.firebaseapp.com",
            projectId: "adwadaw-36ee0",
            storageBucket: "adwadaw-36ee0.firebasestorage.app",
            messagingSenderId: "794472235136",
            appId: "1:794472235136:web:28f4cb173670dee611a665",
            measurementId: "G-NCC61E7EZZ"
          };

        // üõ† **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase**
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        document.addEventListener("DOMContentLoaded", function () {
            const managerForm = document.getElementById("managerForm");
            const managerTableBody = document.getElementById("managerTableBody");
            const orderForm = document.getElementById("orderForm");
            const orderDepartment = document.getElementById("orderDepartment");
            const orderManager = document.getElementById("orderManager");
            const orderAmount = document.getElementById("orderAmount");
            const topManagerForm = document.getElementById("topManagerForm");
            const topManagerTable = document.getElementById("topManagerTable");
            const showLiders = document.getElementById("showLiders");

            // ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞**
            managerForm.addEventListener("submit", function (event) {
                event.preventDefault();
                let pin = document.getElementById("pin").value;
                let name = document.getElementById("name").value;
                let department = document.getElementById("department").value;

                if (pin && name && department) {
                    push(ref(db, "managers"), { pin, name, department })
                        .then(() => {
                            alert("–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω!");
                            managerForm.reset();
                        })
                        .catch(error => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error));
                }
            });

            onValue(ref(db, "managers"), (snapshot) => { 
                managerTableBody.innerHTML = "";
                orderDepartment.innerHTML = `<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>`;

                let departments = new Set();

                snapshot.forEach((childSnapshot) => {
                    let data = childSnapshot.val();
                    let key = childSnapshot.key;
                    departments.add(data.department);

                    let row = `<tr>
                        <td>${data.pin}</td>
                        <td>${data.name}</td>
                        <td>${data.department}</td>
                        <td>
                            <button class="btn btn-warning btn-sm edit-btn" 
                                data-key="${key}" data-name="${data.name}" data-department="${data.department}">
                                <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteManager('${key}')">
                                <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å
                            </button>
                        </td>
                    </tr>`;
                    managerTableBody.innerHTML += row;
                });

                departments.forEach(dept => {
                    let option = document.createElement("option");
                    option.value = dept;
                    option.textContent = dept;
                    orderDepartment.appendChild(option);
                });

                // ‚úÖ –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                document.querySelectorAll(".edit-btn").forEach(button => {
                    button.addEventListener("click", function () {
                        let key = this.getAttribute("data-key");
                        let name = this.getAttribute("data-name");
                        let department = this.getAttribute("data-department");

                        document.getElementById("editManagerId").value = key;
                        document.getElementById("editManagerName").value = name;
                        document.getElementById("editManagerDepartment").value = department;

                        // ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞—è –º–æ–¥–∞–ª–∫–∞
                        let editModalEl = document.getElementById("editManagerModal");
                        let editModal = bootstrap.Modal.getInstance(editModalEl);
                        if (!editModal) {
                            editModal = new bootstrap.Modal(editModalEl);
                        }
                        editModal.show();
                    });
                });

            });

            window.saveManagerChanges = function () {
                let key = document.getElementById("editManagerId").value;
                let name = document.getElementById("editManagerName").value.trim();
                let department = document.getElementById("editManagerDepartment").value.trim();

                if (!key || name === "" || department === "") {
                    alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
                    return;
                }

                console.log("üî• –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...", { key, name, department });

                const managerRef = ref(db, `managers/${key}`);

                update(managerRef, { name, department })
                    .then(() => {
                        console.log("‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!");
                        alert("–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");

                        let editModalEl = document.getElementById("editManagerModal");
                        let editModal = bootstrap.Modal.getInstance(editModalEl) || new bootstrap.Modal(editModalEl);
                        editModal.hide();
                    })
                    .catch(error => {
                        console.error("‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:", error.code, error.message);
                    });
            };



            // üóë **–£–¥–∞–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞**
            window.deleteManager = function (key) {
                remove(ref(db, `managers/${key}`))
                    .then(() => alert("–ú–µ–Ω–µ–¥–∂–µ—Ä —É–¥–∞–ª–µ–Ω!"))
                    .catch(error => console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", error));
            };

            // üèÜ **–§–∏–ª—å—Ç—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–æ –æ—Ç–¥–µ–ª—É**
            orderDepartment.addEventListener("change", function () {
                const selectedDepartment = orderDepartment.value;
                orderManager.innerHTML = `<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</option>`;

                onValue(ref(db, "managers"), (snapshot) => {
                    snapshot.forEach((childSnapshot) => {
                        let manager = childSnapshot.val();
                        if (manager.department === selectedDepartment) {
                            let option = document.createElement("option");
                            option.value = manager.name;
                            option.textContent = manager.name;
                            orderManager.appendChild(option);
                        }
                    });
                });
            });

            // ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**
            orderForm.addEventListener("submit", function (event) {
                event.preventDefault();

                let managerName = orderManager.value;
                let department = orderDepartment.value;
                let amount = orderAmount.value;

                if (managerName && department && amount) {
                    push(ref(db, "orders"), { managerName, department, amount })
                        .then(() => {
                            alert("–ó–∞–∫–∞–∑ –¥–æ–±–∞–≤–ª–µ–Ω!");
                            orderForm.reset();
                        })
                        .catch(error => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error));
                }
            });

            // üìä **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**
            onValue(ref(db, "orders"), (snapshot) => {
            const ordersTableBody = document.getElementById("ordersTableBody");
            ordersTableBody.innerHTML = "";

            snapshot.forEach((childSnapshot) => {
                let data = childSnapshot.val();
                let key = childSnapshot.key;

                let row = `<tr>
                    <td>${data.managerName}</td>
                    <td>${data.department}</td>
                    <td>${data.amount} —Ç–≥</td>
                    <td>
                        <button class="btn btn-warning btn-sm edit-order-btn" 
                            data-key="${key}" data-manager="${data.managerName}" 
                            data-department="${data.department}" data-amount="${data.amount}">
                            <i class="bi bi-pencil"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteOrder('${key}')">
                            <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </td>
                </tr>`;
                ordersTableBody.innerHTML += row;
            });

            // ‚úÖ –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
            document.querySelectorAll(".edit-order-btn").forEach(button => {
                button.addEventListener("click", function () {
                    let key = this.getAttribute("data-key");
                    let manager = this.getAttribute("data-manager");
                    let department = this.getAttribute("data-department");
                    let amount = this.getAttribute("data-amount");

                    document.getElementById("editOrderId").value = key;
                    document.getElementById("editOrderManager").value = manager;
                    document.getElementById("editOrderDepartment").value = department;
                    document.getElementById("editOrderAmount").value = amount;

                    let editOrderModalEl = document.getElementById("editOrderModal");
                    let editOrderModal = bootstrap.Modal.getInstance(editOrderModalEl) || new bootstrap.Modal(editOrderModalEl);
                    editOrderModal.show();
                });
            });
        });
        window.saveOrderChanges = function () {
            let key = document.getElementById("editOrderId").value;
            let manager = document.getElementById("editOrderManager").value.trim();
            let department = document.getElementById("editOrderDepartment").value.trim();
            let amount = document.getElementById("editOrderAmount").value.trim();

            if (!key || manager === "" || department === "" || amount === "") {
                alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
                return;
            }

            console.log("üî• –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–∫–∞–∑–∞...", { key, manager, department, amount });

            const orderRef = ref(db, `orders/${key}`);

            update(orderRef, { managerName: manager, department, amount })
                .then(() => {
                    console.log("‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω!");
                    alert("–î–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");

                    let editOrderModalEl = document.getElementById("editOrderModal");
                    let editOrderModal = bootstrap.Modal.getInstance(editOrderModalEl) || new bootstrap.Modal(editOrderModalEl);
                    editOrderModal.hide();
                })
                .catch(error => {
                    console.error("‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:", error.code, error.message);
                });
        };
        window.deleteOrder = function (key) {
            remove(ref(db, `orders/${key}`))
                .then(() => alert("–ó–∞–∫–∞–∑ —É–¥–∞–ª—ë–Ω!"))
                .catch(error => console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:", error));
        };
            // üèÜ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞**
            topManagerForm.addEventListener("submit", function (event) {
                event.preventDefault();

                const managerData = {
                    fullName: document.getElementById("topManagerName").value,
                    department: document.getElementById("topManagerDepartment").value
                };

                push(ref(db, "top_managers"), managerData)
                    .then(() => {
                        alert("–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω!");
                        topManagerForm.reset();
                    })
                    .catch(error => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error));
            });

            // üìä **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤**
            onValue(ref(db, "top_managers"), (snapshot) => {
                let managers = [];
                snapshot.forEach(childSnapshot => {
                    let data = childSnapshot.val();
                    data.key = childSnapshot.key;
                    managers.push(data);
                });

                updateTopManagers(managers);
            });

            // üóë **–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞**
            window.deleteTopManager = function (key) {
                remove(ref(db, `top_managers/${key}`))
                    .then(() => alert("–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä —É–¥–∞–ª–µ–Ω!"))
                    .catch(error => console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", error));
            };

            // üî• **–§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ "–õ–∏–¥–µ—Ä—ã"**
            function updateTopManagers(data) {
                topManagerTable.innerHTML = "";
                data.forEach(manager => {
                    let row = `<tr>
                        <td>${manager.fullName}</td>
                        <td>${manager.department}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteTopManager('${manager.key}')"><i class="bi bi-bucket"></i> –£–¥–∞–ª–∏—Ç—å</button>
                        </td>
                    </tr>`;
                    topManagerTable.innerHTML += row;
                });

                showLiders.style.display = data.length > 0 ? "block" : "none";
            }
        });
            const weeklyTopManagerForm = document.getElementById("weeklyTopManagerForm");
            const weeklyTopManagerTable = document.getElementById("weeklyTopManagerTable");

            // ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ–¥–µ–ª–∏**
            weeklyTopManagerForm.addEventListener("submit", function (event) {
                event.preventDefault();

                const managerData = {
                    fullName: document.getElementById("weeklyTopManagerName").value,
                    department: document.getElementById("weeklyTopManagerDepartment").value
                };

                push(ref(db, "weekly_top_managers"), managerData)
                    .then(() => {
                        alert("–¢–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ–¥–µ–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω!");
                        weeklyTopManagerForm.reset();
                    })
                    .catch(error => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error));
            });

            // üìä **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –Ω–µ–¥–µ–ª–∏**
            onValue(ref(db, "weekly_top_managers"), (snapshot) => {
                let managers = [];
                snapshot.forEach(childSnapshot => {
                    let data = childSnapshot.val();
                    data.key = childSnapshot.key;
                    managers.push(data);
                });

                updateWeeklyTopManagers(managers);
            });

            // üî• **–§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ "–¢–æ–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ–¥–µ–ª–∏"**
            function updateWeeklyTopManagers(data) {
                weeklyTopManagerTable.innerHTML = "";
                data.forEach(manager => {
                    let row = `<tr>
                        <td>${manager.fullName}</td>
                        <td>${manager.department}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteWeeklyTopManager('${manager.key}')"><i class="bi bi-bucket"></i> –£–¥–∞–ª–∏—Ç—å</button>
                        </td>
                    </tr>`;
                    weeklyTopManagerTable.innerHTML += row;
                });
            }

            // üóë **–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ–¥–µ–ª–∏**
            window.deleteWeeklyTopManager = function (key) {
                remove(ref(db, `weekly_top_managers/${key}`))
                    .then(() => alert("–¢–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ–¥–µ–ª–∏ —É–¥–∞–ª–µ–Ω!"))
                    .catch(error => console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", error));
            };
            // ‚úÖ –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
            window.deleteAllOrders = function () {
                if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã? üö®")) {
                    remove(ref(db, "orders"))
                        .then(() => {
                            alert("‚úÖ –í—Å–µ –∑–∞–∫–∞–∑—ã —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã!");
                        })
                        .catch(error => console.error("‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤:", error));
                }
            };

            // ‚úÖ –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∫ —Ñ—É–Ω–∫—Ü–∏–∏
            document.getElementById("deleteAllOrders").addEventListener("click", deleteAllOrders);
            import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js";

            // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase Auth
            const auth = getAuth();

            // ‚úÖ –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
            function logoutUser() {
                signOut(auth)
                    .then(() => {
                        window.location.href = "index.html"; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞ (–∏–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
                    })
                    .catch((error) => {
                        console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:", error);
                    });
            }

            // ‚úÖ –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏"
            document.getElementById("logoutButton").addEventListener("click", logoutUser);

    </script>

    <script>
        function showMangers(){
            document.getElementById("showMangers").style.display = "block";
            document.getElementById("showOrders").style.display = "none";
            document.getElementById("showLiders").style.display = "none";
            document.getElementById("showWeeklyLiders").style.display = "none";

        }
        function showOrders(){
            document.getElementById("showMangers").style.display = "none";
            document.getElementById("showOrders").style.display = "block";
            document.getElementById("showLiders").style.display = "none";
            document.getElementById("showWeeklyLiders").style.display = "none";

        }     
        function showLidersSection() {
            document.getElementById("showMangers").style.display = "none";
            document.getElementById("showOrders").style.display = "none";
            document.getElementById("showLiders").style.display = "block";
            document.getElementById("showWeeklyLiders").style.display = "none";
        }
   
        function showWeeklyLiders() {
            document.getElementById("showMangers").style.display = "none";
            document.getElementById("showOrders").style.display = "none";
            document.getElementById("showLiders").style.display = "none";
            document.getElementById("showWeeklyLiders").style.display = "block";
        }
        
        document.getElementById("showLidersBtn").addEventListener("click", function() {
            let block = document.getElementById("showLiders");
            block.classList.toggle("active");
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let today = new Date();
            let formattedDate = today.toLocaleDateString("ru-RU", { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById("currentDate").textContent = formattedDate;
        });
        


        function saveManagerChanges() {
                let key = document.getElementById("editManagerId").value;
                let name = document.getElementById("editManagerName").value.trim();
                let department = document.getElementById("editManagerDepartment").value.trim();

                if (!key || name === "" || department === "") {
                    alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!");
                    return;
                }

                console.log("üî• –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...", { key, name, department });

                const managerRef = ref(db, `managers/${key}`);

                update(managerRef, { name, department })
                    .then(() => {
                        console.log("‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ!");
                        alert("–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");

                        // ‚úÖ –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                        let editModalEl = document.getElementById("editManagerModal");
                        let editModal = bootstrap.Modal.getInstance(editModalEl);
                        if (editModal) {
                            editModal.hide();
                        } else {
                            new bootstrap.Modal(editModalEl).hide();
                        }
                    })
                    .catch(error => {
                        console.error("‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:", error.code, error.message);
                    });
            }

    </script>
</head>
<body>
    <main>
        <div class="main-grid">
            <div class="btns mt-5">
                <h3 style="margin-bottom: 50px;"><span style="color: rgb(231, 181, 72);">BALALIFE</span> &nbsp;| <span style="color: steelblue;">OTAN HOLDING</span></h3>
                <button onclick="showMangers()" class="btns-onclick"><i class="bi bi-person"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏</button>
                <button onclick="showOrders()" class="btns-onclick"><i class="bi bi-cart"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</button>
                <button onclick="showLidersSection()" class="btns-onclick" id="showLidersBtn"><i class="bi bi-fire"></i> –¢–û–ü —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</button>
                <button onclick="showWeeklyLiders()" class="btns-onclick"><i class="bi bi-star"></i> –¢–û–ü —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ–¥–µ–ª–∏</button>
                <button id="logoutButton" class="btn-danger"><i class="bi bi-box-arrow-right"></i> –í—ã–π—Ç–∏</button>
            </div>
            <div></div>
            <div class="containers">
                <div class="container mt-5" id="showMangers">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h2>
                    <form id="managerForm">
                        <input type="text" class="form-control mb-2" id="pin" placeholder="PIN –Ω–æ–º–µ—Ä" required>
                        <input type="text" class="form-control mb-2" id="name" placeholder="–§–ò–û" required>
                        <select class="form-control mb-2" id="department" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ê">–ü–µ—Ä–≤–∏—á–∫–∞ –ê</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ë">–ü–µ—Ä–≤–∏—á–∫–∞ –ë</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –°">–ü–µ—Ä–≤–∏—á–∫–∞ –°</option>
                            <option value="–ë–∞–∑–∞">–ë–∞–∑–∞</option>
                        </select>
                        <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</button>
                    </form>
                    
                    <h2 class="mt-5">–°–ø–∏—Å–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>PIN</th>
                                <th>–§–ò–û</th>
                                <th>–û—Ç–¥–µ–ª</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="managerTableBody"></tbody>
                    </table>
                </div>
                <div class="container mt-5" id="showLiders">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –º–µ—Å—è—Ü–∞</h2>
                    <form id="topManagerForm">
                        <div class="mb-3">
                            <label class="form-label">–§–ò–û –º–µ–Ω–µ–¥–∂–µ—Ä–∞</label>
                            <input type="text" id="topManagerName" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–û—Ç–¥–µ–ª</label>
                            <input type="text" id="topManagerDepartment" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </form>
                    <br><br>
                    <h2>–õ–∏–¥–µ—Ä—ã</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–§–ò–û</th>
                                <th>–û—Ç–¥–µ–ª</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="topManagerTable"></tbody>
                    </table>
                </div>
                <div class="container mt-5" id="showWeeklyLiders">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –Ω–µ–¥–µ–ª–∏</h2>
                    <form id="weeklyTopManagerForm">
                        <div class="mb-3">
                            <label class="form-label">–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label>
                            <input type="text" id="weeklyTopManagerName" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">–û—Ç–¥–µ–ª</label>
                            <input type="text" id="weeklyTopManagerDepartment" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </form>
                    <br><br>
                    <h2>–¢–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ–¥–µ–ª–∏</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–§–ò–û</th>
                                <th>–û—Ç–¥–µ–ª</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="weeklyTopManagerTable"></tbody>
                    </table>
                </div>
                <div class="container mt-5" id="showOrders" style="display: none;">
                    <h2>–ó–∞–∫–∞–∑—ã - <span id="currentDate"></span></h2>
                
                    <form id="orderForm">
                        <select class="form-control mb-2" id="orderDepartment" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ê">–ü–µ—Ä–≤–∏—á–∫–∞ –ê</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ë">–ü–µ—Ä–≤–∏—á–∫–∞ –ë</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –°">–ü–µ—Ä–≤–∏—á–∫–∞ –°</option>
                            <option value="–ë–∞–∑–∞">–ë–∞–∑–∞</option>
                        </select>
                        
                        <select class="form-control mb-2" id="orderManager" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</option>
                        </select>
                
                        <input type="number" class="form-control mb-2" id="orderAmount" placeholder="–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞" required>
                
                        <button type="submit" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
                    </form>
                    <!-- –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤ -->
                    <h3 class="mt-5">–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</h3>
                    <button id="deleteAllOrders" class="btn btn-danger mt-3">
                        <i class="bi bi-eraser"></i> –û—á–∏—Å—Ç–∏—Ç—å –≤—á–µ—Ä–∞—à–Ω–∏–µ –∑–∞–∫–∞–∑—ã
                    </button>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ú–µ–Ω–µ–¥–∂–µ—Ä</th>
                                <th>–û—Ç–¥–µ–ª</th>
                                <th>–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>

                            </tr>
                        </thead>
                        <tbody id="ordersTableBody"></tbody>
                    </table>
                </div>
                <!-- üìù –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
                <div class="modal fade" id="editOrderModal" tabindex="-1" aria-labelledby="editOrderModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                            </div>
                            <div class="modal-body">
                                <input type="hidden" id="editOrderId">
                                <div class="mb-3">
                                    <label class="form-label">–ú–µ–Ω–µ–¥–∂–µ—Ä</label>
                                    <input type="text" class="form-control" id="editOrderManager">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–û—Ç–¥–µ–ª</label>
                                    <input type="text" class="form-control" id="editOrderDepartment">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞</label>
                                    <input type="number" class="form-control" id="editOrderAmount">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                                <button type="button" class="btn btn-success" onclick="saveOrderChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>
    
    <!-- üìù –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ -->
    <div class="modal fade" id="editManagerModal" tabindex="-1" aria-labelledby="editManagerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="editManagerId">
                    <div class="mb-3">
                        <label class="form-label">–ò–º—è</label>
                        <input type="text" class="form-control" id="editManagerName">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">–û—Ç–¥–µ–ª</label>
                        <select class="form-control mb-2" id="editManagerDepartment" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ê">–ü–µ—Ä–≤–∏—á–∫–∞ –ê</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –ë">–ü–µ—Ä–≤–∏—á–∫–∞ –ë</option>
                            <option value="–ü–µ—Ä–≤–∏—á–∫–∞ –°">–ü–µ—Ä–≤–∏—á–∫–∞ –°</option>
                            <option value="–ë–∞–∑–∞">–ë–∞–∑–∞</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                    <button type="button" class="btn btn-success" onclick="saveManagerChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>



    <!-- –£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="successModalLabel">–£—Å–ø–µ—Ö!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">–û–ö</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
