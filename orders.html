<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</title>
    <link rel="icon" type="png" href="logo.png">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        #congratsMessage {
            position: fixed;
            top: 0%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: bold;
            color: #ff4081;
            text-shadow: 2px 2px 10px rgba(255, 64, 129, 0.8);
            opacity: 0;
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
            z-index: 5000;
        }
        #topManager {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        #topManager h3 {
            margin-bottom: 10px;
            color: #28a745;
        }
        #topManager p {
            font-size: 1.2rem;
        }
        #topEmployeeWeek {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        #topEmployeeWeek h3 {
            margin-bottom: 10px;
            color: #28a745;
        }
        #topEmployeeWeek p {
            font-size: 1.2rem;
        }
        main{
            display: grid;
            width: 90%;
            gap: 1em;
            margin: 50px auto;
            grid-template-columns: 20% 60% 20%;
        }
        header{
            display: grid;
            width: 90%;
            gap: 1em;
            margin: 50px auto;
            grid-template-columns: 20% 60% 20%;

        }
        main h2{
            margin-top: 0px;
        }
        header h3 span{
            font-weight: bold;
        }
        header h3{
            position: absolute;
        }
        .top-manager_img{
            width: 150px;

        }
        .top-manager_img-2{
            width: 150px;
            height: 130px;
        }
        header h2{
            text-align: center;
        }
        .top-liders_today {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .top-lider {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            min-width: 200px;
            margin-bottom: -70px;
            z-index: 1000;
        }
        .department-card {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            font-weight: bold;
            position: relative;
        }
        .department-card h3{
            display: grid;
        }
        .department-card p{
            
        }
        .top-liders_today-img{
            width: 80%;
            margin-left: 10%;
            position: relative;
            margin-bottom: -100px;
            z-index: -100;
        }

        

        .top-lider {
            margin-top: 0px;
        }

        .first-place {
           position: absolute;
           margin-top: -40px;

        }

        .second-place {
            position: absolute;
            margin-left: -20%;

        }
        .third-place {
            position: absolute;
            margin-left: 20%;
            margin-top: 30px;
        }

        .top-lider img{
            width: 200px;
        }
        .top-lider h3{
            margin-top: -120px;
            text-align: center;
            font-weight: bold;
            width: 80%;
            min-height: 80px;
            margin-left: 10%;
            color: rgb(114, 68, 68);
            text-shadow: 0px 0px 5px rgb(255, 255, 255);
        }
        .top-lider p{
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: rgb(124, 46, 41);
            text-shadow: 0px 0px 3px darkslategrey;
        }
        
        table{
            z-index: 50000;
            font-size: 20px;
            width: 80%;
            margin: auto;
            margin-top: 100px;
        }
        
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let today = new Date();
            let formattedDate = today.toLocaleDateString("ru-RU", { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById("currentDate").textContent = formattedDate;
        });
    </script>
</head>
<body>
    <div id="congratsMessage"></div>


    <main>
            <div>
                <h3 style="font-size: 23px;"><span style="color: rgb(231, 181, 72);">BALALIFE</span> &nbsp;| <span style="color: steelblue;">OTAN HOLDING</span></h3>
                <div id="topManager">
                    <img src="https://spb.rpa-mu.ru/Media/spb/Docs/Sergeeva/–Ω–æ–≤–æ—Å—Ç–∏/racing-trophy-clipart-15.png" class="top-manager_img">
                    <h3>–¢–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä –º–µ—Å—è—Ü–∞</h3>
                    <h4 id="topManagerName">–ó–∞–≥—Ä—É–∑–∫–∞...</h4>
                    <p id="topManagerDepartment"></p>
                </div>
                <div id="topEmployeeWeek">
                    <img src="https://lastfm.freetls.fastly.net/i/u/ar0/364f6c3d3ca20323f86fc2722fbf47ae.png" class="top-manager_img-2">
                    <h3>–¢–æ–ø-—Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ–¥–µ–ª–∏</h3>
                    <h4 id="topEmployeeName">–ó–∞–≥—Ä—É–∑–∫–∞...</h4>
                    <p id="topEmployeeDepartment"></p>
                </div>
                
            </div>
            
            <div class="container">
                <h2 style="text-align: center; height: 50px;">–ó–∞–∫–∞–∑—ã - <span id="currentDate"></span></h2>
                <div class="top-liders_today">
                </div>
                <img class="top-liders_today-img" src="–î–∏–∑–∞–π–Ω –±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è (2) (1).png">
                <table class="table" style="width: 80%; margin-top: 0px;">
                    <thead>
                        <tr>
                            <th></th>
                            <th>–ú–µ–Ω–µ–¥–∂–µ—Ä</th>
                            <th>–û—Ç–¥–µ–ª</th>
                            <th style="text-align: center;">–û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤</th>
                        </tr>
                    </thead>
                    <tbody id="ordersTableBody" style="color: darkslategray;"></tbody>
                </table>
                
            </div>

            <div id="ordersByDepartment" class="container">
                <h4>–û–±—â–∏–π –æ–±—ä—ë–º –∑–∞–∫–∞–∑–æ–≤ –ø–æ –æ—Ç–¥–µ–ª–∞–º:</h4>
                <div id="departmentsContainer" class="d-flex flex-wrap justify-content-center gap-3">
                    
                </div>
                </div>
            </div>
    </main>


    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
        import { getDatabase, ref, onChildAdded, onValue } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAe60jFUBBzI_3FpBihL-Vf45cQG14s6x8",
            authDomain: "balalife-crm-application.firebaseapp.com",
            databaseURL: "https://balalife-crm-application-default-rtdb.firebaseio.com",
            projectId: "balalife-crm-application",
            storageBucket: "balalife-crm-application.firebasestorage.app",
            messagingSenderId: "630645094153",
            appId: "1:630645094153:web:99bf08136f6a10a2b2c5d8"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const ordersTableBody = document.getElementById("ordersTableBody");
        const congratsMessage = document.getElementById("congratsMessage");
        const topManagerName = document.getElementById("topManagerName");
        const topManagerDepartment = document.getElementById("topManagerDepartment");

        let ordersData = {};

        function updateTable() {
    ordersTableBody.innerHTML = "";
    let topLidersContainer = document.querySelector(".top-liders_today");
    topLidersContainer.innerHTML = ""; // –û—á–∏—â–∞–µ–º –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

    let sortedManagers = Object.entries(ordersData)
        .sort((a, b) => b[1].totalAmount - a[1].totalAmount);

    console.log("üìå –°–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã:", sortedManagers);

    // ‚úÖ –ï—Å–ª–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–µ—Ç ‚Äì –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    if (sortedManagers.length === 0) {
        console.warn("‚ùå –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.");
        ordersTableBody.innerHTML = `
            <tr>
                <td colspan="4" style="text-align: center; font-size: 1.2rem; color: darkslategray;">
                    üì¢ –ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç! –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ—Ç–∫—Ä–æ–µ—Ç –∫–∞—Å—Å—É!
                </td>
            </tr>`;
        return;
    }

    // ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º HTML –¥–ª—è —Ç–æ–ø-3
    let topHTML = "";
    const places = ["first-place", "second-place", "third-place"];

    sortedManagers.slice(0, 3).forEach(([manager, data], index) => {
        let placeClass = places[index] || "";
        topHTML += `
            <div class="top-lider ${placeClass}">
                <img src="bgplaces.png">
                <h3>${manager}</h3>
                <p>${data.totalAmount.toLocaleString()} —Ç–≥</p>
            </div>
        `;
    });

    topLidersContainer.innerHTML = topHTML;

    // ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ (–Ω–∞—á–∏–Ω–∞—è —Å 4-–≥–æ –º–µ—Å—Ç–∞)
    sortedManagers.slice(3).forEach(([manager, data], index) => {
        const row = `<tr>
            <td>${index + 4}</td>
            <td>${manager}</td>
            <td>${data.department}</td>
            <td style="text-align: center;">${data.totalAmount.toLocaleString()} —Ç–≥</td>
        </tr>`;
        ordersTableBody.innerHTML += row;
    });
}

// ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Firebase (—Å —É—á–µ—Ç–æ–º –ø—É—Å—Ç–æ–π –±–∞–∑—ã)
onValue(ref(db, "orders"), (snapshot) => {
    ordersData = {}; // –û—á–∏—â–∞–µ–º –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º

    console.log("üìå –î–∞–Ω–Ω—ã–µ –∏–∑ Firebase:", snapshot.exists() ? snapshot.val() : "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö");

    if (!snapshot.exists()) {
        console.warn("‚ùå –ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤ –≤ –±–∞–∑–µ! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ.");
        updateTable(); // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å "–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç"
        return;
    }

    snapshot.forEach((childSnapshot) => {
        let order = childSnapshot.val();
        let managerName = order.managerName;
        let department = order.department;
        let amount = parseFloat(order.amount);

        if (ordersData[managerName]) {
            ordersData[managerName].totalAmount += amount;
        } else {
            ordersData[managerName] = { department: department, totalAmount: amount };
        }
    });

    updateTable(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
});




        function launchConfetti() {
        const positions = [
            { x: 0.1, y: 0.5, angle: 45 },
            { x: 0.5, y: 0.7, angle: 90 },
            { x: 0.9, y: 0.5, angle: 135 }
        ];

        const canvas = document.createElement("canvas");
        canvas.id = "confettiCanvas"; // –î–∞–µ–º ID
        canvas.style.position = "fixed";
        canvas.style.top = "0";
        canvas.style.left = "0";
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        canvas.style.zIndex = "10001"; // –ü–æ–¥–Ω–∏–º–∞–µ–º –≤—ã—à–µ –≤—Å–µ–≥–æ
        canvas.style.pointerEvents = "none";

        document.body.appendChild(canvas); // –î–æ–±–∞–≤–ª—è–µ–º –≤ body

        const myConfetti = confetti.create(canvas, { resize: true });

        positions.forEach((pos, index) => {
            setTimeout(() => {
                myConfetti({
                    particleCount: 100,
                    spread: 150,
                    angle: pos.angle,
                    startVelocity: 45,
                    scalar: 1.2,
                    origin: { x: pos.x, y: pos.y },
                    ticks: 200,
                });
            }, index * 600);
        });

        setTimeout(() => {
            document.body.removeChild(canvas); // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
        }, 5000);
    }


        function showCongratsMessage(managerName) {
            const messages = [
                `–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –ª–∏–¥–µ—Ä, ${managerName}! üéâ`,
                `–í–µ–ª–∏–∫–æ–ª–µ–ø–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, ${managerName}! üî•`,
                `–¢—ã —Å–¥–µ–ª–∞–ª(–∞) —ç—Ç–æ! –ì–æ—Ä–¥–∏–º—Å—è —Ç–æ–±–æ–π, ${managerName}! üöÄ`,
                `–¢–≤–æ–π —É—Å–ø–µ—Ö ‚Äì —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ, ${managerName}! üí™`,
                `–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –∫–æ–º–∞–Ω–¥—É, ${managerName}! üî•`,
                `–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞, ${managerName}! –¢—ã –Ω–∞ –≤—ã—Å–æ—Ç–µ! üåü`
            ];

            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            let randomMessage = messages[Math.floor(Math.random() * messages.length)];

            congratsMessage.textContent = randomMessage;
            congratsMessage.style.opacity = "1";
            congratsMessage.style.fontSize = "70px";
            congratsMessage.style.textAlign = "center";
            congratsMessage.style.height = "100%";
            congratsMessage.style.width = "100%";
            congratsMessage.style.backgroundColor = "rgb(255, 255, 255, 0.5)";

            congratsMessage.style.alignContent = "center";
            congratsMessage.style.color = "darkslategray"; // –ù–µ–±–µ—Å–Ω–æ-–≥–æ–ª—É–±–æ–π —Ü–≤–µ—Ç
            congratsMessage.style.textShadow = "0px 0px 5px white"; // –ì–æ–ª—É–±–æ–µ + –±–µ–ª–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
            congratsMessage.style.transition = "opacity 0.5s ease-in-out, transform 0.5s ease-in-out"; // –ü–ª–∞–≤–Ω–æ—Å—Ç—å
            congratsMessage.style.transform = "translate(-50%, 0%)";

            setTimeout(() => {
                congratsMessage.style.opacity = "0";
                congratsMessage.style.transform = "translate(-50%, -50%)";
            }, 5000);
        }

        // üõ† –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
        onChildAdded(ref(db, "orders"), (snapshot) => {
            const data = snapshot.val();
            if (ordersData[data.managerName]) {
                ordersData[data.managerName].totalAmount += parseFloat(data.amount);
            } else {
                ordersData[data.managerName] = {
                    department: data.department,
                    totalAmount: parseFloat(data.amount)
                };
            }
            updateTable();
            launchConfetti();
            showCongratsMessage(data.managerName);

        });

        // üèÜ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –º–µ—Å—è—Ü–∞
        function loadTopManager() {
            onValue(ref(db, "top_managers"), (snapshot) => {
                let managers = [];
                snapshot.forEach(childSnapshot => {
                    managers.push(childSnapshot.val());
                });

                if (managers.length > 0) {
                    let topManager = managers[managers.length - 1]; // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ
                    topManagerName.textContent = `${topManager.fullName}`;
                    topManagerDepartment.textContent = `–û—Ç–¥–µ–ª: ${topManager.department}`;
                } else {
                    topManagerName.textContent = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö";
                    topManagerDepartment.textContent = "";
                }
            });
        }

        // üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ø-–º–µ–Ω–µ–¥–∂–µ—Ä–∞
        loadTopManager();

        function loadTopEmployeeOfTheWeek() {
        onValue(ref(db, "weekly_top_managers"), (snapshot) => {
            let employees = [];
            snapshot.forEach(childSnapshot => {
                employees.push(childSnapshot.val());
            });

            if (employees.length > 0) {
                let topEmployee = employees[employees.length - 1]; // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ
                document.getElementById("topEmployeeName").textContent = `${topEmployee.fullName}`;
                document.getElementById("topEmployeeDepartment").textContent = `–û—Ç–¥–µ–ª: ${topEmployee.department}`;
            } else {
                document.getElementById("topEmployeeName").textContent = "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö";
                document.getElementById("topEmployeeDepartment").textContent = "";
            }
        });
    }
    const departmentsContainer = document.getElementById("departmentsContainer");
    let departmentOrders = {};

    // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –æ—Ç–¥–µ–ª—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –Ω–∏—Ö –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤
    function loadDepartments() {
        onValue(ref(db, "managers"), (snapshot) => {
            departmentOrders = {}; // –û—á–∏—Å—Ç–∫–∞

            snapshot.forEach((childSnapshot) => {
                let manager = childSnapshot.val();
                let department = manager.department;
                
                if (!departmentOrders.hasOwnProperty(department)) {
                    departmentOrders[department] = 0; // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ 0 —Ç–≥
                }
            });

            loadOrders(); // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–¥–µ–ª–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ–º –∑–∞–∫–∞–∑—ã
        });
    }

    // ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—É–º–º—ã –æ—Ç–¥–µ–ª–æ–≤
    function loadOrders() {
        onValue(ref(db, "orders"), (snapshot) => {
            // üîπ –û–±–Ω—É–ª—è–µ–º —Å—É–º–º—ã, –Ω–æ –ù–ï —É–¥–∞–ª—è–µ–º –æ—Ç–¥–µ–ª—ã
            Object.keys(departmentOrders).forEach(dept => {
                departmentOrders[dept] = 0;
            });

            snapshot.forEach((childSnapshot) => {
                let order = childSnapshot.val();
                let department = order.department;
                let amount = parseFloat(order.amount);

                if (departmentOrders.hasOwnProperty(department)) {
                    departmentOrders[department] += amount;
                }
            });

            updateDepartmentsView(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        });
    }

    // ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º –±–ª–æ–∫ —Å –æ—Ç–¥–µ–ª–∞–º–∏
    function updateDepartmentsView() {
        departmentsContainer.innerHTML = "";

        let sortedDepartments = Object.entries(departmentOrders)
            .sort((a, b) => b[1] - a[1]); // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é

        sortedDepartments.forEach(([department, totalAmount], index) => {
            let backgroundImage;
            
            switch (index) {
                case 0:
                    backgroundImage = "url('bg1.png')";
                    break;
                case 1:
                    backgroundImage = "url('bg2.png')";
                    break;
                case 2:
                    backgroundImage = "url('bg3.png')";
                    break;
                case 3:
                    backgroundImage = "url('bg4.png')";
                    break;
                default:
                    backgroundImage = "url('default.png')"; // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ–Ω
            }

            let departmentCard = `
                <div class="department-card" style="
                    background-image: ${backgroundImage};
                    background-size: cover;
                    background-position: center;
                    padding: 15px;
                    border-radius: 10px;
                    text-align: left;
                    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
                    width: 90%;
                    color: white;
                    font-weight: bold;">
                    <h3><span style="font-size: 20px">${index + 1} –º–µ—Å—Ç–æ</span> ${department}</h3>
                    <p style="text-shadow: 0px 0px 3px solid; font-size: 20px;"> 
                        <strong>${totalAmount.toLocaleString()} —Ç–≥</strong>
                    </p>
                </div>
            `;
            departmentsContainer.innerHTML += departmentCard;
        });
    }

    // üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –æ—Ç–¥–µ–ª—ã –∏ –∏—Ö –∑–∞–∫–∞–∑—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadDepartments();

    updateDepartmentsView(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
    loadTopEmployeeOfTheWeek();
    </script>
    <script>
        const salesMemes = [
            "https://risovach.ru/upload/2015/08/mem/moe-lico-kogda_89430726_orig_.png",
            "https://sun9-69.userapi.com/impg/b20oNGpk6idykwDz7j5hhbg4ZMz9YpYezw3EAA/TywJxt9E9W0.jpg?size=500x366&quality=96&sign=67e1bd1d16d11b9f8ef5966d1a1f55ff&type=album",
            "https://cs10.pikabu.ru/post_img/2019/02/06/1/1549406246148112416.jpg",
            "https://habrastorage.org/getpro/habr/upload_files/3fe/9c4/0a9/3fe9c40a9dce8959dc30337cf9842b51.jpeg",
            "https://avatars.dzeninfra.ru/get-zen_doc/9686459/pub_647c2290fbbc155f7935b66d_647c245d398ee614dc6ac1a4/scale_1200",
            "https://cdn1.tenchat.ru/static/vbc-gostinder/2022-07-14/78bc718b-9b6e-495a-82f3-05c9cc45c42d.jpeg",
            "https://cs12.pikabu.ru/post_img/2022/11/09/0/1667944349135975689.webp",
            "https://avatars.mds.yandex.net/i?id=ca51196d3a61c39d5a14c87bd21538f3_l-5298642-images-thumbs&n=13",
            "https://risovach.ru/upload/2017/11/mem/r_161251265_orig_.jpg",
            "https://sun9-73.userapi.com/impg/euW84gnPPJq_oXBoATbuZR7Lf97D3ijK3Ge2kQ/Pwz5RhbpwK0.jpg?size=590x575&quality=95&sign=d9ae5a6dd6005479350bd00227aa6807&c_uniq_tag=wR5KbZ8hr5ueXfUBzJ19IdGH1K7aJ74zfcxr78DCzYc&type=album",
            "https://avatars.mds.yandex.net/i?id=9cb0d101cb317795af8ab09230625cee_l-4238543-images-thumbs&n=13"
        ];
        let memeIndex = 0; // –°—á—ë—Ç—á–∏–∫ –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ–º–æ–≤ –ø–æ –æ—á–µ—Ä–µ–¥–∏

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–µ–º–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function showSalesMeme() {
            // –ü–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –º–µ–º –ø–æ –∏–Ω–¥–µ–∫—Å—É
            const currentMeme = salesMemes[memeIndex];

            let memeDiv = document.createElement("div");
            let memeImg = document.createElement("img");

            memeDiv.style.position = "fixed";
            memeDiv.style.top = "50%";
            memeDiv.style.left = "50%";
            memeDiv.style.transform = "translate(-50%, -50%)";
            memeDiv.style.width = "100%"; // –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ —Å –º–µ–º–æ–º
            memeDiv.style.height = "100%"; // –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ —Å –º–µ–º–æ–º
            memeDiv.style.alignContent = "center"; // –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞ —Å –º–µ–º–æ–º

            memeDiv.style.padding = "20px";
            memeDiv.style.background = "rgba(0, 0, 0, 0.9)";
            memeDiv.style.borderRadius = "10px";
            memeDiv.style.boxShadow = "0px 0px 15px rgba(255, 255, 255, 0.5)";
            memeDiv.style.zIndex = "99999";
            memeDiv.style.textAlign = "center";
            memeDiv.style.transition = "opacity 1s ease-in-out";

            memeImg.src = currentMeme;
            memeImg.style.width = "45%"; 
            memeImg.style.borderRadius = "10px";

            memeDiv.appendChild(memeImg);
            document.body.appendChild(memeDiv);

            // –£–±–∏—Ä–∞–µ–º –º–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                memeDiv.style.opacity = "0";
                setTimeout(() => memeDiv.remove(), 1000);
            }, 5000);

            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å, –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –∫–æ–Ω—Ü–∞ ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º —Å 0
            memeIndex = (memeIndex + 1) % salesMemes.length;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –º–µ–º –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
        setInterval(showSalesMeme, 30 * 60 * 1000);

        // –°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –º–µ–º–∞
        const testButton = document.createElement("button");
        testButton.textContent = "–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–º";
        testButton.style.position = "fixed";
        testButton.style.bottom = "20px";
        testButton.style.right = "20px";
        testButton.style.padding = "10px 20px";
        testButton.style.fontSize = "18px";
        testButton.style.background = "#28a745";
        testButton.style.color = "#fff";
        testButton.style.border = "none";
        testButton.style.borderRadius = "5px";
        testButton.style.cursor = "pointer";
        testButton.style.zIndex = "100000";
        testButton.onclick = showSalesMeme;

        document.body.appendChild(testButton);
    </script>
</body>
</html>
